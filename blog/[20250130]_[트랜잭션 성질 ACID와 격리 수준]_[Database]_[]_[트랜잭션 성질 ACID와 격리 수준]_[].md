# 트랜잭션 성질 ACID와 격리 수준

### 원자성(Atomicity)
- 트랜잭션을 구성하는 연산들이 모두 정상 실행이거나, 실패여야 한다.
- 중간 상태가 데이터베이스에 영향을 미치면 안된다.

### 일관성(Consistency)
- 트랜잭션이 수행된 후에도 데이터베이스가 일관된 상태를 유지해야 한다. 트랜잭션 수행 전과 후의 데이터베이스 상태가 모두 일관되어야 한다.

### 격리성(Isolation)
- 현재 수행 중인 트랜잭션이 완료될 때까지 다른 트랜잭션들이 접근할 수 없다.
- 각 트랜잭션은 독립적으로 수행되며 서로 충돌하지 않도록 보장한다.

### 지속성(Durability)
- 트랜잭션이 성공적으로 완료된 후, 데이터베이스에 반영한 수행 결과는 어떠한 경우에도 손실되지 않고 영구적으로 남는다.
- 시스템 장애가 발생하더라도 트랜잭션 작업 결과는 없어지지 않고 데이터베이스에 그대로 남아있어야 한다.
- 장애 발생 시 데이터베이스를 원래 상태로 복구하는 회복 기능이 필요하다.

## 트랜잭션 격리 수준

우선 데이터베이스에서 트랜잭션의 격리성이 낮을 경우 발생하는 문제점들 이다.

- Dirty Read : 한 트랜잭션에서 아직 커밋되지 않은 변경을 다른 트랜잭션이 읽을 수 있다. 이로 인해 잘못된 데이터나 일관성이 없는 데이터를 읽는다.
- Non-repeatable Read : 한 트랜잭션 내에서 같은 쿼리를 두 번 수행, 그 사이에 다른 트랜잭션이 값을 수정 또는 삭제해 두 쿼리 결과가 다르게 나타나는 현상이다.
- Phantom Read : 한 트랜잭션에서 같은 쿼리를 두 번 수행, 첫번째 쿼리에서 없던 레코드가 두번째 쿼리에서 나타나는 현상이다.

이제 트랜잭션 격리 수준을 보자.

- READ UNCOMMITTED : 가장 낮은 격리 수준, 다른 트랜잭션이 아직 커밋하지 않은 데이터를 읽을 수 있다. Dirty Read 발생 가능, 다른 트랜잭션이 롤백하면 잘못된 데이터가 읽힐 수 있다.
- READ COMMITTED : 트랜잭션이 커밋된 데이터만 읽을 수 있다. Non-repeatable Read가 발생할 수 있다. 동일 트랜잭션 내에서 같은 쿼리를 실행해도 다른 결과가 나올 수 있다.
- REPEATABLE READ : 트랜잭션 동안 읽은 데이터는 변경되지 않으며, 동일한 데이터 대해 반복적으로 읽을 때 일관된 결과를 보장한다. Phantom Read가 발생할 수 있다. 쿼리 결과에 새로운 데이터가 추가되거나 삭제될 수 있다.
- SERIALIZABLE : 가장 높은 격리 수준으로 모든 트랜잭션이 완전히 독립적으로 실행된다.
